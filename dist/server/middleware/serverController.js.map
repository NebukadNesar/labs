{"version":3,"sources":["../../../src/server/middleware/serverController.js"],"names":["serverController","serverModel","getAllServers","req","res","serverList","send","length","refresh","delete","deleteServers","getServerInfo","getServerDetails","params","serverip","serverDetails","server","addBulkServers","serverlist","i","newserver","serverName","serverIp","serialNumber","serverEndDate","Date","serverLocation","console","log","push","addServersBulk","upload","JSON","stringify","body","list","Object","prototype","toString","call","then","e"],"mappings":";;;;;;AAIA;;;;AACA;;;;;;AALA;;;;AAOA,IAAIA,mBAAmB,EAAvB;;AAEA,IAAIC,cAAc,2BAAlB;;AAEAD,iBAAiBE,aAAjB,GAAiC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7C,+BAAmBF,aAAnB,CAAiC,UAACG,UAAD,EAAc;AAC7CA,iBAAaA,cAAc,EAA3B;AACAD,QAAIE,IAAJ,CAAS,EAAC,cAAaD,UAAd,EAA0B,aAAYA,WAAWE,MAAjD,EAAT;AACD,GAHD;AAID,CALD;;AAOAP,iBAAiBQ,OAAjB,GAA2B,UAACL,GAAD,EAAMC,GAAN,EAAc;AACvC;AACAA,MAAIE,IAAJ,CAAS,oBAAT;AACD,CAHD;;AAKAN,iBAAiBS,MAAjB,GAA0B,UAACN,GAAD,EAAMC,GAAN,EAAc;AACtC,+BAAmBM,aAAnB;AACAN,MAAIE,IAAJ,CAAS,SAAT;AACD,CAHD;;AAKAN,iBAAiBW,aAAjB,GAAgC,UAACR,GAAD,EAAMC,GAAN,EAAc;AAC5C,+BAAmBQ,gBAAnB,CAAoCT,IAAIU,MAAJ,CAAWC,QAA/C,EAAyD,UAACC,aAAD,EAAiB;AACxEA,oBAAgBA,iBAAiBd,YAAYe,MAAZ,EAAjC;AACAZ,QAAIE,IAAJ,CAAS,EAAC,iBAAiBS,aAAlB,EAAT;AACD,GAHD;AAID,CALD;;AAOAf,iBAAiBiB,cAAjB,GAAiC,UAACd,GAAD,EAAMC,GAAN,EAAc;AAC7C,MAAIc,aAAa,EAAjB;AACA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC1B,QAAIC,YAAYnB,YAAYe,MAAZ,EAAhB;AACAI,cAAUC,UAAV,GAAuB,gBAAgBF,CAAvC;AACAC,cAAUE,QAAV,GAAqB,aAAaH,CAAb,GAAiB,MAAtC;AACAC,cAAUG,YAAV,GAAyB,UAAzB;AACAH,cAAUI,aAAV,GAA0B,IAAIC,IAAJ,EAA1B;AACAL,cAAUM,cAAV,GAA2B,wBAAwBP,CAAnD;AACAQ,YAAQC,GAAR,CAAYR,SAAZ;AACAF,eAAWW,IAAX,CAAgBT,SAAhB;AACD;AACD,+BAAmBU,cAAnB,CAAkCZ,UAAlC;AACAd,MAAIE,IAAJ,CAAS,OAAT;AACD,CAdD;;AAiBAN,iBAAiB+B,MAAjB,GAA0B,UAAC5B,GAAD,EAAMC,GAAN,EAAc;AACtC,MAAI;AACF4B,SAAKC,SAAL,CAAe9B,IAAI+B,IAAnB;AACA,QAAIC,OAAOhC,IAAI+B,IAAf;AACAP,YAAQC,GAAR,CAAYO,KAAK5B,MAAjB,EAAyB4B,KAAK,CAAL,CAAzB,EAAkCA,KAAK,CAAL,EAAQd,UAA1C;AACA,QAAIe,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAAgCJ,IAAhC,MAA2C,gBAA/C,EAAkE;AAChEA,aAAO,EAAP;AACAA,WAAKN,IAAL,CAAU1B,IAAI+B,IAAd;AACD;AACD,iCAAmBJ,cAAnB,CAAkCK,IAAlC,EAAwCK,IAAxC,CAA6C,YAAI;AAC7CpC,UAAIE,IAAJ,CAAS,OAAT;AACH,KAFD;AAGD,GAXD,CAWE,OAAOmC,CAAP,EAAU,CACX;AACF,CAdD;;AAgBA;kBACezC,gB","file":"serverController.js","sourcesContent":["/**\n*@auther:burhanc\n*/\n\nimport serverInfo from '../../modal/serverInfo';\nimport serverDBController from '../../controllers/serverDBController';\n\nlet serverController = {};\n\nlet serverModel = serverInfo();\n\nserverController.getAllServers = (req, res) => {\n  serverDBController.getAllServers((serverList)=>{\n    serverList = serverList || [];\n    res.send({\"serverList\":serverList, \"listcount\":serverList.length});\n  });\n}\n\nserverController.refresh = (req, res) => {\n  /**not implemented**/\n  res.send(\"refresh-serverList\");\n}\n\nserverController.delete = (req, res) => {\n  serverDBController.deleteServers();\n  res.send(\"deleted\");\n}\n\nserverController.getServerInfo= (req, res) => {\n  serverDBController.getServerDetails(req.params.serverip, (serverDetails)=>{\n    serverDetails = serverDetails || serverModel.server();\n    res.send({\"serverDetails\": serverDetails});\n  });\n}\n\nserverController.addBulkServers= (req, res) => {\n  var serverlist = [];\n  for (var i = 0; i < 3; i++) {\n    var newserver = serverModel.server();\n    newserver.serverName = \"Servername \" + i;\n    newserver.serverIp = \"192.168.\" + i + \".110\";\n    newserver.serialNumber = \"XyZTKLMN\";\n    newserver.serverEndDate = new Date();\n    newserver.serverLocation = \"Location of server \" + i;\n    console.log(newserver);\n    serverlist.push(newserver)\n  }\n  serverDBController.addServersBulk(serverlist);\n  res.send(\"added\");\n}\n\n\nserverController.upload = (req, res) => {\n  try {\n    JSON.stringify(req.body);\n    var list = req.body;\n    console.log(list.length, list[0], list[0].serverName);\n    if( Object.prototype.toString.call( list ) !== '[object Array]' ) {\n      list = [];\n      list.push(req.body);\n    }\n    serverDBController.addServersBulk(list).then(()=>{\n        res.send(\"added\");\n    });\n  } catch (e) {\n  }\n}\n\n//public\nexport default serverController;\n"]}