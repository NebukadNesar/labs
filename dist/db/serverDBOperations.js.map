{"version":3,"sources":["../../src/db/serverDBOperations.js"],"names":["serverModel","Server","Admin","serverDBOperations","adminAccount","username","password","find","err","accounts","length","console","log","save","error","findServer","serverIp","callback","server","findAllServers","servers","addServer","serverdetails","serverDetails","res","addServersBulk","serverlist","i","deleteServer","findOneAndRemove","deleteServers","remove","exec"],"mappings":";;;;;;AAIA;;;;AACA;;;;;;AALA;;;;AAOA,IAAIA,cAAc,2BAAlB;AACA,IAAIC,SAAS,2BAAGA,MAAhB;AACA,IAAIC,QAAQ,2BAAGA,KAAf;AACA,IAAIC,qBAAqB,EAAzB;;AAEA,IAAIC,eAAe,IAAIF,KAAJ,CAAU,EAACG,UAAS,OAAV,EAAmBC,UAAS,MAA5B,EAAV,CAAnB;;AAEA;;AAEAJ,MAAMK,IAAN,CAAW,EAACF,UAAW,OAAZ,EAAX,EAAiC,UAAUG,GAAV,EAAeC,QAAf,EAAyB;AACtD,MAAIA,SAASC,MAAb,EAAoB;AAClBC,YAAQC,GAAR,CAAY,4BAAZ;AACD,GAFD,MAEK;AACHR,iBAAaS,IAAb,CAAkB,UAAUL,GAAV,EAAe;AAC/B,UAAIA,GAAJ,EAAS,OAAOG,QAAQG,KAAR,CAAcN,GAAd,CAAP;AACV,KAFD;AAGD;AACJ,CARD;;AAWA;;;;;AAKAL,mBAAmBY,UAAnB,GAAgC,UAACC,QAAD,EAAUC,QAAV,EAAuB;AACrDhB,SAAOM,IAAP,CAAY,EAACS,UAAUA,QAAX,EAAZ,EAAkC,UAACR,GAAD,EAAMU,MAAN,EAAiB;AACjDD,aAASC,MAAT;AACD,GAFD;AAGD,CAJD;;AAMAf,mBAAmBgB,cAAnB,GAAoC,UAACF,QAAD,EAAc;AAChDhB,SAAOM,IAAP,CAAY,EAAZ,EAAgB,UAACC,GAAD,EAAMY,OAAN,EAAkB;AAChCH,aAASG,OAAT;AACD,GAFD;AAGD,CAJD;;AAMAjB,mBAAmBkB,SAAnB,GAA+B,UAACC,aAAD,EAAmB;AAChD,MAAIJ,SAAS,IAAIjB,MAAJ,CAAW,EAAEsB,4BAAF,EAAX,CAAb;AACAL,SAAOL,IAAP,CAAY,UAAUL,GAAV,EAAcgB,GAAd,EAAmB;AAC7B,QAAIhB,GAAJ,EAAS,OAAOG,QAAQG,KAAR,CAAcN,GAAd,CAAP;AACV,GAFD;AAGD,CALD;;AAOAL,mBAAmBsB,cAAnB,GAAoC,UAACC,UAAD,EAAgB;AAClD,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,WAAWhB,MAA/B,EAAuCiB,GAAvC,EAA4C;AAC1C,QAAIT,SAAS,IAAIjB,MAAJ,CAAWD,YAAYkB,MAAZ,CAAmBQ,WAAWC,CAAX,CAAnB,CAAX,CAAb;AACAT,WAAOL,IAAP,CAAY,UAAUL,GAAV,EAAe;AACzB,UAAIA,GAAJ,EAAS,OAAOG,QAAQG,KAAR,CAAcN,GAAd,CAAP;AACV,KAFD;AAGD;AACF,CAPD;;AASAL,mBAAmByB,YAAnB,GAAkC,UAACZ,QAAD,EAAa;AAC7Cf,SAAO4B,gBAAP,CAAwB,EAACb,UAAUA,QAAX,EAAxB,EAA8C,UAASR,GAAT,EAAa;AACzDG,YAAQC,GAAR,CAAY,wCAAZ,EAAsDI,QAAtD;AACD,GAFD;AAGD,CAJD;;AAMAb,mBAAmB2B,aAAnB,GAAmC,YAAK;AACtC7B,SAAO8B,MAAP,GAAgBC,IAAhB;AACD,CAFD;;AAKA;;;kBAGe7B,kB","file":"serverDBOperations.js","sourcesContent":["/**\n* @auther:burhanc\n* db api\n*/\nimport db from \"./dbSchemaCreators\"\nimport serverInfo from \"../modal/serverInfo\"\n\nlet serverModel = serverInfo();\nlet Server = db.Server;\nlet Admin = db.Admin;\nlet serverDBOperations = {}\n\nvar adminAccount = new Admin({username:\"admin\", password:\"1234\"});\n\n/** adds the default admin account **/\n\nAdmin.find({username : 'admin'}, function (err, accounts) {\n    if (accounts.length){\n      console.log('Adming name exists already');\n    }else{\n      adminAccount.save(function (err) {\n        if (err) return console.error(err);\n      });\n    }\n});\n\n\n/************************************\n*    ||  database                   *\n*    \\/      query operations       *\n************************************/\n\nserverDBOperations.findServer = (serverIp,callback) => {\n  Server.find({serverIp: serverIp}, (err, server) => {\n    callback(server);\n  });\n}\n\nserverDBOperations.findAllServers = (callback) => {\n  Server.find({}, (err, servers) => {\n    callback(servers);\n  });\n}\n\nserverDBOperations.addServer = (serverdetails) => {\n  var server = new Server({ serverDetails });\n  server.save(function (err,res) {\n    if (err) return console.error(err);\n  });\n}\n\nserverDBOperations.addServersBulk = (serverlist) => {\n  for (var i = 0; i < serverlist.length; i++) {\n    var server = new Server(serverModel.server(serverlist[i]));\n    server.save(function (err) {\n      if (err) return console.error(err);\n    });\n  }\n}\n\nserverDBOperations.deleteServer = (serverIp) =>{\n  Server.findOneAndRemove({serverIp: serverIp}, function(err){\n    console.log(\"Error occured while deleting server : \", serverIp);\n  });\n}\n\nserverDBOperations.deleteServers = () =>{\n  Server.remove().exec();\n}\n\n\n/*\n* public db API\n*/\nexport default serverDBOperations;\n"]}